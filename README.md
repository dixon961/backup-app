# Automated Docker Backup Service

–ü—Ä–æ—Å—Ç–æ–π, –Ω–æ –º–æ—â–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å Linux-—Å–µ—Ä–≤–µ—Ä–∞ –≤ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É WebDAV. –°–µ—Ä–≤–∏—Å —É–ø–∞–∫–æ–≤–∞–Ω –≤ Docker, —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

-   **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ –æ–¥–∏–Ω `config.yml`.
-   **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è `cron` –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
-   **–û–±–ª–∞—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `rclone` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∞—Ä—Ö–∏–≤–æ–≤ –≤ –ª—é–±–æ–µ WebDAV-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫, Google Drive –∏ –¥—Ä.).
-   **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞:** –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π –≤ –æ–±–ª–∞–∫–µ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Å—Ä–æ–∫–∞.
-   **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞) –≤ Telegram.
-   **–ò–∑–æ–ª—è—Ü–∏—è:** –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–Ω—É—Ç—Ä–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

**–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:** `Docker`, `docker-compose`, `git`.

**1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone https://github.com/dixon961/backup-app.git
cd backup-app
```

**2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `rclone`:**
–ù–∞–º –Ω—É–∂–µ–Ω —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `rclone.conf`.
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞ –≤–∞—à–µ–º —Ö–æ—Å—Ç-–∫–æ–º–ø—å—é—Ç–µ—Ä–µ `rclone config` –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–∞—à–µ–º—É WebDAV-—Ö—Ä–∞–Ω–∏–ª–∏—â—É.
- –î–∞–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `MyCloud`).
- –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª `rclone.conf` (–æ–±—ã—á–Ω–æ –≤ `~/.config/rclone/`) –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –≤ –ø–∞–ø–∫—É `config/rclone/` –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

**3. –°–æ–∑–¥–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `config.yml`:**
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `config/config.yml` –ø–æ —ç—Ç–æ–º—É —à–∞–±–ª–æ–Ω—É –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –µ–≥–æ.
```yaml
# config/config.yml
globals:
  rclone_remote_name: "MyCloud" # –ò–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ rclone.conf
  remote_base_path: "server-backups"
  default_schedule: "0 2 * * *"
  default_retention_days: 30

telegram:
  chat_id: "123456789" # –í–∞—à Chat ID –≤ Telegram

tasks:
  - name: "etc-configs"
    source: "/mnt/data/etc"
    archive_prefix: "etc-backup"
    schedule: "0 3 * * 1"
    retention_days: 60
  - name: "web-data"
    source: "/mnt/data/www"
    archive_prefix: "my-site"
```

**4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `docker-compose.yml`:**
- –£–∫–∞–∂–∏—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω Telegram –≤ `environment.TELEGRAM_TOKEN`.
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `volumes`, —á—Ç–æ–±—ã –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—å –ø–∞–ø–∫–∏ –¥–ª—è –±—ç–∫–∞–ø–∞ —Å —Ö–æ—Å—Ç–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –ü—É—Ç—å —Å–ª–µ–≤–∞ ‚Äî –Ω–∞ —Ö–æ—Å—Ç–µ, —Å–ø—Ä–∞–≤–∞ ‚Äî –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (–¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `source` –≤ `config.yml`).

**5. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å:**
```bash
docker-compose up --build -d
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

-   **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:** `docker-compose logs -f`
-   **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞:** `docker-compose down`

## ‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ü–∞–ø–∫–∞ `config/` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞—à–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (`rclone.conf`) –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `.gitignore`. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–π –ø–∞–ø–∫–∏.**